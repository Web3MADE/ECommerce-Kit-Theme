"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_thirdweb-dev_sdk_dist_vote-cc8908d9_esm_js"],{

/***/ "./node_modules/@thirdweb-dev/sdk/dist/vote-cc8908d9.esm.js":
/*!******************************************************************!*\
  !*** ./node_modules/@thirdweb-dev/sdk/dist/vote-cc8908d9.esm.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Vote": () => (/* binding */ Vote)
/* harmony export */ });
/* harmony import */ var _QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./QueryParams-7418efe8.esm.js */ "./node_modules/@thirdweb-dev/sdk/dist/QueryParams-7418efe8.esm.js");
/* harmony import */ var _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./getContract-3fc8e18e.esm.js */ "./node_modules/@thirdweb-dev/sdk/dist/getContract-3fc8e18e.esm.js");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC20_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC20.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC20.json");
/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ethers */ "./node_modules/@ethersproject/bignumber/lib.esm/bignumber.js");
/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ethers */ "./node_modules/@ethersproject/hash/lib.esm/id.js");
/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ethers */ "./node_modules/@ethersproject/units/lib.esm/index.js");
/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ethers */ "./node_modules/@ethersproject/contracts/lib.esm/index.js");
/* harmony import */ var bn_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bn.js */ "./node_modules/bn.js/lib/bn.js");
/* harmony import */ var bn_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bn_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC165_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC165.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC165.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC721_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC721.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC1155_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC1155.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155.json");
/* harmony import */ var tiny_invariant__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tiny-invariant */ "./node_modules/tiny-invariant/dist/esm/tiny-invariant.js");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IThirdwebContract_json__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IThirdwebContract.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IThirdwebContract.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IBurnableERC20_json__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IBurnableERC20.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IBurnableERC20.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDrop_json__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDrop.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDrop.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDropERC20_V2_json__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDropERC20_V2.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropERC20_V2.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDropSinglePhase_json__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDropSinglePhase_V1_json__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase_V1.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase_V1.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC20Permit_json__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC20Permit.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC20Permit.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IMintableERC20_json__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IMintableERC20.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IMintableERC20.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IMulticall_json__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IMulticall.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IMulticall.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_ISignatureMintERC20_json__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC20.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC20.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IBurnableERC721_json__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IBurnableERC721.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IBurnableERC721.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IClaimableERC721_json__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IClaimableERC721.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IClaimableERC721.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDelayedReveal_json__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDelayedReveal.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDelayedReveal.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDropERC721_V3_json__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDropERC721_V3.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropERC721_V3.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC721Enumerable_json__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC721Enumerable.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721Enumerable.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC721Supply_json__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC721Supply.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721Supply.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_ILazyMint_json__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/ILazyMint.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/ILazyMint.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IMintableERC721_json__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IMintableERC721.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IMintableERC721.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_ISignatureMintERC721_json__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_ISignatureMintERC721_V1_json__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721_V1.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721_V1.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_LazyMintWithTier_json__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/LazyMintWithTier.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/LazyMintWithTier.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IBurnableERC1155_json__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IBurnableERC1155.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IBurnableERC1155.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IClaimableERC1155_json__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IClaimableERC1155.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IClaimableERC1155.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDrop1155_json__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDrop1155.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDrop1155.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDropERC1155_V2_json__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDropERC1155_V2.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropERC1155_V2.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDropSinglePhase1155_json__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDropSinglePhase1155_V1_json__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155_V1.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155_V1.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC1155Enumerable_json__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC1155Enumerable.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155Enumerable.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IMintableERC1155_json__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IMintableERC1155.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IMintableERC1155.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_ISignatureMintERC1155_json__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC1155.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC1155.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_ERC2771Context_json__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/ERC2771Context.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/ERC2771Context.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IAppURI_json__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IAppURI.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IAppURI.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IContractMetadata_json__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IContractMetadata.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IContractMetadata.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDirectListings_json__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDirectListings.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDirectListings.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IEnglishAuctions_json__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IEnglishAuctions.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IEnglishAuctions.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IOffers_json__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IOffers.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IOffers.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IPackVRFDirect_json__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IPackVRFDirect.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IPackVRFDirect.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IPermissions_json__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IPermissions.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IPermissions.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IPermissionsEnumerable_json__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IPermissionsEnumerable.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IPermissionsEnumerable.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IPlatformFee_json__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IPlatformFee.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IPlatformFee.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IPrimarySale_json__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IPrimarySale.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IPrimarySale.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IRoyalty_json__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IRoyalty.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IRoyalty.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_Ownable_json__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/Ownable.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/Ownable.json");
/* harmony import */ var bs58__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! bs58 */ "./node_modules/bs58/index.js");
/* harmony import */ var bs58__WEBPACK_IMPORTED_MODULE_49___default = /*#__PURE__*/__webpack_require__.n(bs58__WEBPACK_IMPORTED_MODULE_49__);
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! cross-fetch */ "./node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_50___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_50__);
/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.mjs");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_Forwarder_json__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/Forwarder.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/Forwarder.json");
/* harmony import */ var _thirdweb_dev_storage__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! @thirdweb-dev/storage */ "./node_modules/@thirdweb-dev/storage/dist/thirdweb-dev-storage.esm.js");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC20Metadata_json__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC20Metadata.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC20Metadata.json");
/* harmony import */ var merkletreejs__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! merkletreejs */ "./node_modules/merkletreejs/dist/index.js");
/* harmony import */ var merkletreejs__WEBPACK_IMPORTED_MODULE_55___default = /*#__PURE__*/__webpack_require__.n(merkletreejs__WEBPACK_IMPORTED_MODULE_55__);
/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! fast-deep-equal */ "./node_modules/fast-deep-equal/index.js");
/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_56___default = /*#__PURE__*/__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_56__);
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC721Metadata_json__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC721Metadata.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721Metadata.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IERC1155Metadata_json__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IERC1155Metadata.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155Metadata.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_IDelayedRevealDeprecated_json__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/IDelayedRevealDeprecated.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/IDelayedRevealDeprecated.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_ContractPublisher_json__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/ContractPublisher.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/ContractPublisher.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_TWMultichainRegistryLogic_json__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/TWMultichainRegistryLogic.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/TWMultichainRegistryLogic.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_TWMultichainRegistryRouter_json__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/TWMultichainRegistryRouter.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/TWMultichainRegistryRouter.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_TWFactory_json__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/TWFactory.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/TWFactory.json");
/* harmony import */ var _thirdweb_dev_contracts_js_dist_abis_TWRegistry_json__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! @thirdweb-dev/contracts-js/dist/abis/TWRegistry.json */ "./node_modules/@thirdweb-dev/contracts-js/dist/abis/TWRegistry.json");








































































/**
 * Create a decentralized organization for token holders to vote on proposals.
 *
 * @example
 *
 * ```javascript
 * import { ThirdwebSDK } from "@thirdweb-dev/sdk";
 *
 * const sdk = new ThirdwebSDK("{{chainName}}");
 * const contract = await sdk.getContract("{{contract_address}}", "vote");
 * ```
 *
 * @public
 */
class Vote {
  /**
   * @internal
   */

  get chainId() {
    return this._chainId;
  }
  constructor(network, address, storage) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    let abi = arguments.length > 4 ? arguments[4] : undefined;
    let chainId = arguments.length > 5 ? arguments[5] : undefined;
    let contractWrapper = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : new _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.cV(network, address, abi, options);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "contractWrapper", void 0);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "storage", void 0);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "abi", void 0);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "metadata", void 0);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "app", void 0);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "encoder", void 0);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "estimator", void 0);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "events", void 0);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "interceptor", void 0);
    (0,_QueryParams_7418efe8_esm_js__WEBPACK_IMPORTED_MODULE_66__._)(this, "_chainId", void 0);
    this._chainId = chainId;
    this.abi = abi;
    this.contractWrapper = contractWrapper;
    this.storage = storage;
    this.metadata = new _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.am(this.contractWrapper, _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.df, this.storage);
    this.app = new _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.b4(this.contractWrapper, this.metadata, this.storage);
    this.encoder = new _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.al(this.contractWrapper);
    this.estimator = new _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.aZ(this.contractWrapper);
    this.events = new _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.a_(this.contractWrapper);
    this.interceptor = new _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.a$(this.contractWrapper);
  }
  onNetworkUpdated(network) {
    this.contractWrapper.updateSignerOrProvider(network);
  }
  getAddress() {
    return this.contractWrapper.readContract.address;
  }

  /** ******************************
   * READ FUNCTIONS
   *******************************/

  /**
   * Get a proposal by id.
   *
   * @param proposalId - The proposal id to get.
   * @returns - The proposal.
   */
  async get(proposalId) {
    const all = await this.getAll();
    const proposals = all.filter(p => p.proposalId.eq(ethers__WEBPACK_IMPORTED_MODULE_67__.BigNumber.from(proposalId)));
    if (proposals.length === 0) {
      throw new Error("proposal not found");
    }
    return proposals[0];
  }

  /**
   * Get All Proposals
   *
   * @remarks Get all the proposals in this contract.
   *
   * @example
   * ```javascript
   * const proposals = await contract.getAll();
   * console.log(proposals);
   * ```
   *
   * @returns - All the proposals in the contract.
   */
  async getAll() {
    return Promise.all((await this.contractWrapper.readContract.getAllProposals()).map(async data => ({
      proposalId: data.proposalId,
      proposer: data.proposer,
      description: data.description,
      startBlock: data.startBlock,
      endBlock: data.endBlock,
      state: await this.contractWrapper.readContract.state(data.proposalId),
      votes: await this.getProposalVotes(data.proposalId),
      executions: data[3].map((c, i) => ({
        toAddress: data.targets[i],
        nativeTokenValue: c,
        transactionData: data.calldatas[i]
      }))
    })));
  }

  /**
   * Get the votes for a specific proposal
   * @param proposalId - the proposalId
   */
  async getProposalVotes(proposalId) {
    const votes = await this.contractWrapper.readContract.proposalVotes(proposalId);
    return [{
      type: _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.ba.Against,
      label: "Against",
      count: votes.againstVotes
    }, {
      type: _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.ba.For,
      label: "For",
      count: votes.forVotes
    }, {
      type: _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.ba.Abstain,
      label: "Abstain",
      count: votes.abstainVotes
    }];
  }

  /**
   * Check If Wallet Voted
   *
   * @remarks Check if a specified wallet has voted a specific proposal
   *
   * @example
   * ```javascript
   * // The proposal ID of the proposal you want to check
   * const proposalId = "0";
   * // The address of the wallet you want to check to see if they voted
   * const address = "{{wallet_address}}";
   *
   * await contract.hasVoted(proposalId, address);
   * ```
   *
   * @param proposalId - The unique identifier of a proposal .
   * @param account - (optional) wallet account address. Defaults to connected signer.
   * @returns - True if the account has already voted on the proposal.
   */
  async hasVoted(proposalId, account) {
    if (!account) {
      account = await this.contractWrapper.getSignerAddress();
    }
    return this.contractWrapper.readContract.hasVoted(proposalId, account);
  }

  /**
   * Can Execute
   *
   * @remarks Check if a proposal can be executed (if the proposal has succeeded).
   *
   * @example
   * ```javascript
   * // The proposal ID of the proposal you want to check
   * const proposalId = "0";
   * const canExecute = await contract.canExecute(proposalId);
   * console.log(canExecute);
   * ```
   *
   * @param proposalId - The proposal ID to check.
   * @returns - True if the proposal can be executed, false otherwise.
   */
  async canExecute(proposalId) {
    await this.ensureExists(proposalId);
    const proposal = await this.get(proposalId);
    const tos = proposal.executions.map(p => p.toAddress);
    const values = proposal.executions.map(p => p.nativeTokenValue);
    const datas = proposal.executions.map(p => p.transactionData);
    const descriptionHash = ethers__WEBPACK_IMPORTED_MODULE_68__.id(proposal.description);
    try {
      await this.contractWrapper.callStatic().execute(tos, values, datas, descriptionHash);
      return true;
    } catch (e) {
      return false;
    }
  }

  /**
   * Check the balance of the project wallet in the native token of the chain
   *
   * @returns - The balance of the project in the native token of the chain
   */
  async balance() {
    const balance = await this.contractWrapper.readContract.provider.getBalance(this.contractWrapper.readContract.address);
    return {
      name: "",
      symbol: "",
      decimals: 18,
      value: balance,
      displayValue: ethers__WEBPACK_IMPORTED_MODULE_69__.formatUnits(balance, 18)
    };
  }

  /**
   * Check the balance of the project wallet in a particular
   * ERC20 token contract
   *
   * @returns - The balance of the project in the native token of the chain
   */
  async balanceOfToken(tokenAddress) {
    const erc20 = new ethers__WEBPACK_IMPORTED_MODULE_70__.Contract(tokenAddress, _thirdweb_dev_contracts_js_dist_abis_IERC20_json__WEBPACK_IMPORTED_MODULE_0__, this.contractWrapper.getProvider());
    return await (0,_getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.bc)(this.contractWrapper.getProvider(), tokenAddress, await erc20.balanceOf(this.contractWrapper.readContract.address));
  }

  /**
   * Find a proposal by its id.
   *
   * @internal
   * @param proposalId - Proposal to check for
   */
  async ensureExists(proposalId) {
    try {
      await this.contractWrapper.readContract.state(proposalId);
    } catch (e) {
      throw Error(`Proposal ${proposalId} not found`);
    }
  }

  /**
   * Get the Vote contract configuration
   */
  async settings() {
    const [votingDelay, votingPeriod, votingTokenAddress, votingQuorumFraction, proposalTokenThreshold] = await Promise.all([this.contractWrapper.readContract.votingDelay(), this.contractWrapper.readContract.votingPeriod(), this.contractWrapper.readContract.token(), this.contractWrapper.readContract["quorumNumerator()"](), this.contractWrapper.readContract.proposalThreshold()]);
    const votingTokenMetadata = await (0,_getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.bd)(this.contractWrapper.getProvider(), votingTokenAddress);
    return {
      votingDelay: votingDelay.toString(),
      votingPeriod: votingPeriod.toString(),
      votingTokenAddress,
      votingTokenMetadata,
      votingQuorumFraction: votingQuorumFraction.toString(),
      proposalTokenThreshold: proposalTokenThreshold.toString()
    };
  }

  /** ******************************
   * WRITE FUNCTIONS
   *******************************/

  /**
   * Create Proposal
   *
   * @remarks Create a new proposal for token holders to vote on.
   *
   * @example
   * ```javascript
   * // The description of the proposal you want to pass
   * const description = "This is a great proposal - vote for it!"
   * // You can (optionally) pass in contract calls that will get executed when the proposal is executed.
   * const executions = [
   *   {
   *     // The contract you want to make a call to
   *     toAddress: "0x...",
   *     // The amount of the native currency to send in this transaction
   *     nativeTokenValue: 0,
   *     // Transaction data that will be executed when the proposal is executed
   *     // This is an example transfer transaction with a token contract (which you would need to set up in code)
   *     transactionData: tokenContract.encoder.encode(
   *       "transfer", [
   *         fromAddress,
   *         amount,
   *       ]
   *     ),
   *   }
   * ]
   *
   * const proposal = await contract.propose(description, executions);
   * ```
   *
   * @param description - The description of the proposal.
   * @param executions - A set of executable transactions that will be run if the proposal is passed and executed.
   * @returns - The id of the created proposal and the transaction receipt.
   */
  async propose(description, executions) {
    if (!executions) {
      executions = [{
        toAddress: this.contractWrapper.readContract.address,
        nativeTokenValue: 0,
        transactionData: "0x"
      }];
    }
    const tos = executions.map(p => p.toAddress);
    const values = executions.map(p => p.nativeTokenValue);
    const datas = executions.map(p => p.transactionData);
    const receipt = await this.contractWrapper.sendTransaction("propose", [tos, values, datas, description]);
    const event = this.contractWrapper.parseLogs("ProposalCreated", receipt?.logs);
    return {
      id: event[0].args.proposalId,
      receipt
    };
  }

  /**
   * Vote
   *
   * @remarks Vote on an active proposal
   *
   * @example
   * ```javascript
   * // The proposal ID of the proposal you want to vote on
   * const proposalId = "0";
   * // The vote type you want to cast, can be VoteType.Against, VoteType.For, or VoteType.Abstain
   * const voteType = VoteType.For;
   * // The (optional) reason for the vote
   * const reason = "I like this proposal!";
   *
   * await contract.vote(proposalId, voteType, reason);
   * ```
   * @param proposalId - The proposal to cast a vote on.
   * @param voteType - The position the voter is taking on their vote.
   * @param reason - (optional) The reason for the vote.
   */
  async vote(proposalId, voteType) {
    let reason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
    await this.ensureExists(proposalId);
    return {
      receipt: await this.contractWrapper.sendTransaction("castVoteWithReason", [proposalId, voteType, reason])
    };
  }

  /**
   * Execute Proposal
   *
   * @remarks Execute the related transactions for a proposal if the proposal succeeded.
   *
   * @example
   * ```javascript
   * // The proposal ID of the proposal you want to execute
   * const proposalId = "0"
   * await contract.execute(proposalId);
   * ```
   *
   * @param proposalId - The proposal id to execute.
   */
  async execute(proposalId) {
    await this.ensureExists(proposalId);
    const proposal = await this.get(proposalId);
    const tos = proposal.executions.map(p => p.toAddress);
    const values = proposal.executions.map(p => p.nativeTokenValue);
    const datas = proposal.executions.map(p => p.transactionData);
    const descriptionHash = ethers__WEBPACK_IMPORTED_MODULE_68__.id(proposal.description);
    return {
      receipt: await this.contractWrapper.sendTransaction("execute", [tos, values, datas, descriptionHash])
    };
  }

  /**
   * @internal
   */
  async prepare(method, args, overrides) {
    return _getContract_3fc8e18e_esm_js__WEBPACK_IMPORTED_MODULE_65__.b3.fromContractWrapper({
      contractWrapper: this.contractWrapper,
      method,
      args,
      overrides
    });
  }

  /**
   * @internal
   */
  async call(functionName) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    return this.contractWrapper.call(functionName, ...args);
  }
}




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfdGhpcmR3ZWItZGV2X3Nka19kaXN0X3ZvdGUtY2M4OTA4ZDlfZXNtX2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxRTtBQUNtUTtBQUNoUTtBQUNuQjtBQUN0QztBQUNGO0FBQzhDO0FBQ0E7QUFDQztBQUNwQztBQUM2QztBQUNIO0FBQ1Q7QUFDUTtBQUNHO0FBQ0c7QUFDUDtBQUNFO0FBQ0o7QUFDUztBQUNKO0FBQ0M7QUFDRjtBQUNBO0FBQ0c7QUFDSjtBQUNKO0FBQ007QUFDSztBQUNHO0FBQ1A7QUFDQTtBQUNDO0FBQ1I7QUFDTTtBQUNLO0FBQ0c7QUFDTDtBQUNGO0FBQ0s7QUFDUDtBQUNQO0FBQ1U7QUFDRjtBQUNDO0FBQ1Q7QUFDTztBQUNGO0FBQ1U7QUFDVjtBQUNBO0FBQ0o7QUFDRDtBQUM3QjtBQUNoQjtBQUNPO0FBQ0U7QUFDc0M7QUFDOUI7QUFDbUM7QUFDNUM7QUFDRztBQUNYO0FBQ3FEO0FBQ0M7QUFDUTtBQUNQO0FBQ1E7QUFDQztBQUNqQjtBQUNDOztBQUU5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQSxrQ0FBa0MsV0FBVztBQUM3Qyw2Q0FBNkMsa0JBQWtCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrR0FBa0csNkRBQWU7QUFDakgsSUFBSSxnRUFBZTtBQUNuQixJQUFJLGdFQUFlO0FBQ25CLElBQUksZ0VBQWU7QUFDbkIsSUFBSSxnRUFBZTtBQUNuQixJQUFJLGdFQUFlO0FBQ25CLElBQUksZ0VBQWU7QUFDbkIsSUFBSSxnRUFBZTtBQUNuQixJQUFJLGdFQUFlO0FBQ25CLElBQUksZ0VBQWU7QUFDbkIsSUFBSSxnRUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw2REFBZ0IsdUJBQXVCLDZEQUFrQjtBQUNqRixtQkFBbUIsNkRBQWM7QUFDakMsdUJBQXVCLDZEQUFlO0FBQ3RDLHlCQUF5Qiw2REFBZ0I7QUFDekMsc0JBQXNCLDZEQUFjO0FBQ3BDLDJCQUEyQiw2REFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsbURBQWM7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUVBQWdCO0FBQzVCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWSxpRUFBWTtBQUN4QjtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVkscUVBQWdCO0FBQzVCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsdUNBQWU7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0RBQXdCO0FBQzVDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQVEsZUFBZSw2RUFBUTtBQUNyRCxpQkFBaUIsaUVBQWtCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTiw4QkFBOEIsWUFBWTtBQUMxQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsaUVBQXFCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix1Q0FBZTtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUZBQStCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLGFBQWE7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHRoaXJkd2ViLWRldi9zZGsvZGlzdC92b3RlLWNjODkwOGQ5LmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfIGFzIF9kZWZpbmVQcm9wZXJ0eSB9IGZyb20gJy4vUXVlcnlQYXJhbXMtNzQxOGVmZTguZXNtLmpzJztcbmltcG9ydCB7IGNWIGFzIENvbnRyYWN0V3JhcHBlciwgYW0gYXMgQ29udHJhY3RNZXRhZGF0YSwgZGYgYXMgVm90ZUNvbnRyYWN0U2NoZW1hLCBiNCBhcyBDb250cmFjdEFwcFVSSSwgYWwgYXMgQ29udHJhY3RFbmNvZGVyLCBhWiBhcyBHYXNDb3N0RXN0aW1hdG9yLCBhXyBhcyBDb250cmFjdEV2ZW50cywgYSQgYXMgQ29udHJhY3RJbnRlcmNlcHRvciwgYmEgYXMgVm90ZVR5cGUsIGJjIGFzIGZldGNoQ3VycmVuY3lWYWx1ZSwgYmQgYXMgZmV0Y2hDdXJyZW5jeU1ldGFkYXRhLCBiMyBhcyBUcmFuc2FjdGlvbiB9IGZyb20gJy4vZ2V0Q29udHJhY3QtM2ZjOGUxOGUuZXNtLmpzJztcbmltcG9ydCBFUkMyMEFiaSBmcm9tICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSUVSQzIwLmpzb24nO1xuaW1wb3J0IHsgQmlnTnVtYmVyLCBldGhlcnMsIENvbnRyYWN0IH0gZnJvbSAnZXRoZXJzJztcbmltcG9ydCAnYm4uanMnO1xuaW1wb3J0ICd6b2QnO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSUVSQzE2NS5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lFUkM3MjEuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRVJDMTE1NS5qc29uJztcbmltcG9ydCAndGlueS1pbnZhcmlhbnQnO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSVRoaXJkd2ViQ29udHJhY3QuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JQnVybmFibGVFUkMyMC5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lEcm9wLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSURyb3BFUkMyMF9WMi5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lEcm9wU2luZ2xlUGhhc2UuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRHJvcFNpbmdsZVBoYXNlX1YxLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSUVSQzIwUGVybWl0Lmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSU1pbnRhYmxlRVJDMjAuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JTXVsdGljYWxsLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSVNpZ25hdHVyZU1pbnRFUkMyMC5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lCdXJuYWJsZUVSQzcyMS5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lDbGFpbWFibGVFUkM3MjEuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRGVsYXllZFJldmVhbC5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lEcm9wRVJDNzIxX1YzLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSUVSQzcyMUVudW1lcmFibGUuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRVJDNzIxU3VwcGx5Lmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSUxhenlNaW50Lmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSU1pbnRhYmxlRVJDNzIxLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSVNpZ25hdHVyZU1pbnRFUkM3MjEuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JU2lnbmF0dXJlTWludEVSQzcyMV9WMS5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0xhenlNaW50V2l0aFRpZXIuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JQnVybmFibGVFUkMxMTU1Lmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSUNsYWltYWJsZUVSQzExNTUuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRHJvcDExNTUuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRHJvcEVSQzExNTVfVjIuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRHJvcFNpbmdsZVBoYXNlMTE1NS5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lEcm9wU2luZ2xlUGhhc2UxMTU1X1YxLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSUVSQzExNTVFbnVtZXJhYmxlLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSU1pbnRhYmxlRVJDMTE1NS5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lTaWduYXR1cmVNaW50RVJDMTE1NS5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0VSQzI3NzFDb250ZXh0Lmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSUFwcFVSSS5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lDb250cmFjdE1ldGFkYXRhLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSURpcmVjdExpc3RpbmdzLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSUVuZ2xpc2hBdWN0aW9ucy5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lPZmZlcnMuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JUGFja1ZSRkRpcmVjdC5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lQZXJtaXNzaW9ucy5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL0lQZXJtaXNzaW9uc0VudW1lcmFibGUuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JUGxhdGZvcm1GZWUuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JUHJpbWFyeVNhbGUuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JUm95YWx0eS5qc29uJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jb250cmFjdHMtanMvZGlzdC9hYmlzL093bmFibGUuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY2hhaW5zJztcbmltcG9ydCAnYnM1OCc7XG5pbXBvcnQgJ2Nyb3NzLWZldGNoJztcbmltcG9ydCAnZXZlbnRlbWl0dGVyMyc7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9Gb3J3YXJkZXIuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvc3RvcmFnZSc7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRVJDMjBNZXRhZGF0YS5qc29uJztcbmltcG9ydCAnbWVya2xldHJlZWpzJztcbmltcG9ydCAnZmFzdC1kZWVwLWVxdWFsJztcbmltcG9ydCAndXVpZCc7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRVJDNzIxTWV0YWRhdGEuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9JRVJDMTE1NU1ldGFkYXRhLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvSURlbGF5ZWRSZXZlYWxEZXByZWNhdGVkLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvQ29udHJhY3RQdWJsaXNoZXIuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9UV011bHRpY2hhaW5SZWdpc3RyeUxvZ2ljLmpzb24nO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NvbnRyYWN0cy1qcy9kaXN0L2FiaXMvVFdNdWx0aWNoYWluUmVnaXN0cnlSb3V0ZXIuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9UV0ZhY3RvcnkuanNvbic7XG5pbXBvcnQgJ0B0aGlyZHdlYi1kZXYvY29udHJhY3RzLWpzL2Rpc3QvYWJpcy9UV1JlZ2lzdHJ5Lmpzb24nO1xuXG4vKipcbiAqIENyZWF0ZSBhIGRlY2VudHJhbGl6ZWQgb3JnYW5pemF0aW9uIGZvciB0b2tlbiBob2xkZXJzIHRvIHZvdGUgb24gcHJvcG9zYWxzLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogaW1wb3J0IHsgVGhpcmR3ZWJTREsgfSBmcm9tIFwiQHRoaXJkd2ViLWRldi9zZGtcIjtcbiAqXG4gKiBjb25zdCBzZGsgPSBuZXcgVGhpcmR3ZWJTREsoXCJ7e2NoYWluTmFtZX19XCIpO1xuICogY29uc3QgY29udHJhY3QgPSBhd2FpdCBzZGsuZ2V0Q29udHJhY3QoXCJ7e2NvbnRyYWN0X2FkZHJlc3N9fVwiLCBcInZvdGVcIik7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIFZvdGUge1xuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuXG4gIGdldCBjaGFpbklkKCkge1xuICAgIHJldHVybiB0aGlzLl9jaGFpbklkO1xuICB9XG4gIGNvbnN0cnVjdG9yKG5ldHdvcmssIGFkZHJlc3MsIHN0b3JhZ2UpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gICAgbGV0IGFiaSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ID8gYXJndW1lbnRzWzRdIDogdW5kZWZpbmVkO1xuICAgIGxldCBjaGFpbklkID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgPyBhcmd1bWVudHNbNV0gOiB1bmRlZmluZWQ7XG4gICAgbGV0IGNvbnRyYWN0V3JhcHBlciA9IGFyZ3VtZW50cy5sZW5ndGggPiA2ICYmIGFyZ3VtZW50c1s2XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzZdIDogbmV3IENvbnRyYWN0V3JhcHBlcihuZXR3b3JrLCBhZGRyZXNzLCBhYmksIG9wdGlvbnMpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbnRyYWN0V3JhcHBlclwiLCB2b2lkIDApO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0b3JhZ2VcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhYmlcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB2b2lkIDApO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFwcFwiLCB2b2lkIDApO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuY29kZXJcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJlc3RpbWF0b3JcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJldmVudHNcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnRlcmNlcHRvclwiLCB2b2lkIDApO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9jaGFpbklkXCIsIHZvaWQgMCk7XG4gICAgdGhpcy5fY2hhaW5JZCA9IGNoYWluSWQ7XG4gICAgdGhpcy5hYmkgPSBhYmk7XG4gICAgdGhpcy5jb250cmFjdFdyYXBwZXIgPSBjb250cmFjdFdyYXBwZXI7XG4gICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgICB0aGlzLm1ldGFkYXRhID0gbmV3IENvbnRyYWN0TWV0YWRhdGEodGhpcy5jb250cmFjdFdyYXBwZXIsIFZvdGVDb250cmFjdFNjaGVtYSwgdGhpcy5zdG9yYWdlKTtcbiAgICB0aGlzLmFwcCA9IG5ldyBDb250cmFjdEFwcFVSSSh0aGlzLmNvbnRyYWN0V3JhcHBlciwgdGhpcy5tZXRhZGF0YSwgdGhpcy5zdG9yYWdlKTtcbiAgICB0aGlzLmVuY29kZXIgPSBuZXcgQ29udHJhY3RFbmNvZGVyKHRoaXMuY29udHJhY3RXcmFwcGVyKTtcbiAgICB0aGlzLmVzdGltYXRvciA9IG5ldyBHYXNDb3N0RXN0aW1hdG9yKHRoaXMuY29udHJhY3RXcmFwcGVyKTtcbiAgICB0aGlzLmV2ZW50cyA9IG5ldyBDb250cmFjdEV2ZW50cyh0aGlzLmNvbnRyYWN0V3JhcHBlcik7XG4gICAgdGhpcy5pbnRlcmNlcHRvciA9IG5ldyBDb250cmFjdEludGVyY2VwdG9yKHRoaXMuY29udHJhY3RXcmFwcGVyKTtcbiAgfVxuICBvbk5ldHdvcmtVcGRhdGVkKG5ldHdvcmspIHtcbiAgICB0aGlzLmNvbnRyYWN0V3JhcHBlci51cGRhdGVTaWduZXJPclByb3ZpZGVyKG5ldHdvcmspO1xuICB9XG4gIGdldEFkZHJlc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJhY3RXcmFwcGVyLnJlYWRDb250cmFjdC5hZGRyZXNzO1xuICB9XG5cbiAgLyoqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgKiBSRUFEIEZVTkNUSU9OU1xuICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogR2V0IGEgcHJvcG9zYWwgYnkgaWQuXG4gICAqXG4gICAqIEBwYXJhbSBwcm9wb3NhbElkIC0gVGhlIHByb3Bvc2FsIGlkIHRvIGdldC5cbiAgICogQHJldHVybnMgLSBUaGUgcHJvcG9zYWwuXG4gICAqL1xuICBhc3luYyBnZXQocHJvcG9zYWxJZCkge1xuICAgIGNvbnN0IGFsbCA9IGF3YWl0IHRoaXMuZ2V0QWxsKCk7XG4gICAgY29uc3QgcHJvcG9zYWxzID0gYWxsLmZpbHRlcihwID0+IHAucHJvcG9zYWxJZC5lcShCaWdOdW1iZXIuZnJvbShwcm9wb3NhbElkKSkpO1xuICAgIGlmIChwcm9wb3NhbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwcm9wb3NhbCBub3QgZm91bmRcIik7XG4gICAgfVxuICAgIHJldHVybiBwcm9wb3NhbHNbMF07XG4gIH1cblxuICAvKipcbiAgICogR2V0IEFsbCBQcm9wb3NhbHNcbiAgICpcbiAgICogQHJlbWFya3MgR2V0IGFsbCB0aGUgcHJvcG9zYWxzIGluIHRoaXMgY29udHJhY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY29uc3QgcHJvcG9zYWxzID0gYXdhaXQgY29udHJhY3QuZ2V0QWxsKCk7XG4gICAqIGNvbnNvbGUubG9nKHByb3Bvc2Fscyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJucyAtIEFsbCB0aGUgcHJvcG9zYWxzIGluIHRoZSBjb250cmFjdC5cbiAgICovXG4gIGFzeW5jIGdldEFsbCgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoKGF3YWl0IHRoaXMuY29udHJhY3RXcmFwcGVyLnJlYWRDb250cmFjdC5nZXRBbGxQcm9wb3NhbHMoKSkubWFwKGFzeW5jIGRhdGEgPT4gKHtcbiAgICAgIHByb3Bvc2FsSWQ6IGRhdGEucHJvcG9zYWxJZCxcbiAgICAgIHByb3Bvc2VyOiBkYXRhLnByb3Bvc2VyLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBzdGFydEJsb2NrOiBkYXRhLnN0YXJ0QmxvY2ssXG4gICAgICBlbmRCbG9jazogZGF0YS5lbmRCbG9jayxcbiAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmNvbnRyYWN0V3JhcHBlci5yZWFkQ29udHJhY3Quc3RhdGUoZGF0YS5wcm9wb3NhbElkKSxcbiAgICAgIHZvdGVzOiBhd2FpdCB0aGlzLmdldFByb3Bvc2FsVm90ZXMoZGF0YS5wcm9wb3NhbElkKSxcbiAgICAgIGV4ZWN1dGlvbnM6IGRhdGFbM10ubWFwKChjLCBpKSA9PiAoe1xuICAgICAgICB0b0FkZHJlc3M6IGRhdGEudGFyZ2V0c1tpXSxcbiAgICAgICAgbmF0aXZlVG9rZW5WYWx1ZTogYyxcbiAgICAgICAgdHJhbnNhY3Rpb25EYXRhOiBkYXRhLmNhbGxkYXRhc1tpXVxuICAgICAgfSkpXG4gICAgfSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZvdGVzIGZvciBhIHNwZWNpZmljIHByb3Bvc2FsXG4gICAqIEBwYXJhbSBwcm9wb3NhbElkIC0gdGhlIHByb3Bvc2FsSWRcbiAgICovXG4gIGFzeW5jIGdldFByb3Bvc2FsVm90ZXMocHJvcG9zYWxJZCkge1xuICAgIGNvbnN0IHZvdGVzID0gYXdhaXQgdGhpcy5jb250cmFjdFdyYXBwZXIucmVhZENvbnRyYWN0LnByb3Bvc2FsVm90ZXMocHJvcG9zYWxJZCk7XG4gICAgcmV0dXJuIFt7XG4gICAgICB0eXBlOiBWb3RlVHlwZS5BZ2FpbnN0LFxuICAgICAgbGFiZWw6IFwiQWdhaW5zdFwiLFxuICAgICAgY291bnQ6IHZvdGVzLmFnYWluc3RWb3Rlc1xuICAgIH0sIHtcbiAgICAgIHR5cGU6IFZvdGVUeXBlLkZvcixcbiAgICAgIGxhYmVsOiBcIkZvclwiLFxuICAgICAgY291bnQ6IHZvdGVzLmZvclZvdGVzXG4gICAgfSwge1xuICAgICAgdHlwZTogVm90ZVR5cGUuQWJzdGFpbixcbiAgICAgIGxhYmVsOiBcIkFic3RhaW5cIixcbiAgICAgIGNvdW50OiB2b3Rlcy5hYnN0YWluVm90ZXNcbiAgICB9XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBJZiBXYWxsZXQgVm90ZWRcbiAgICpcbiAgICogQHJlbWFya3MgQ2hlY2sgaWYgYSBzcGVjaWZpZWQgd2FsbGV0IGhhcyB2b3RlZCBhIHNwZWNpZmljIHByb3Bvc2FsXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogLy8gVGhlIHByb3Bvc2FsIElEIG9mIHRoZSBwcm9wb3NhbCB5b3Ugd2FudCB0byBjaGVja1xuICAgKiBjb25zdCBwcm9wb3NhbElkID0gXCIwXCI7XG4gICAqIC8vIFRoZSBhZGRyZXNzIG9mIHRoZSB3YWxsZXQgeW91IHdhbnQgdG8gY2hlY2sgdG8gc2VlIGlmIHRoZXkgdm90ZWRcbiAgICogY29uc3QgYWRkcmVzcyA9IFwie3t3YWxsZXRfYWRkcmVzc319XCI7XG4gICAqXG4gICAqIGF3YWl0IGNvbnRyYWN0Lmhhc1ZvdGVkKHByb3Bvc2FsSWQsIGFkZHJlc3MpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHByb3Bvc2FsSWQgLSBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgYSBwcm9wb3NhbCAuXG4gICAqIEBwYXJhbSBhY2NvdW50IC0gKG9wdGlvbmFsKSB3YWxsZXQgYWNjb3VudCBhZGRyZXNzLiBEZWZhdWx0cyB0byBjb25uZWN0ZWQgc2lnbmVyLlxuICAgKiBAcmV0dXJucyAtIFRydWUgaWYgdGhlIGFjY291bnQgaGFzIGFscmVhZHkgdm90ZWQgb24gdGhlIHByb3Bvc2FsLlxuICAgKi9cbiAgYXN5bmMgaGFzVm90ZWQocHJvcG9zYWxJZCwgYWNjb3VudCkge1xuICAgIGlmICghYWNjb3VudCkge1xuICAgICAgYWNjb3VudCA9IGF3YWl0IHRoaXMuY29udHJhY3RXcmFwcGVyLmdldFNpZ25lckFkZHJlc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29udHJhY3RXcmFwcGVyLnJlYWRDb250cmFjdC5oYXNWb3RlZChwcm9wb3NhbElkLCBhY2NvdW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW4gRXhlY3V0ZVxuICAgKlxuICAgKiBAcmVtYXJrcyBDaGVjayBpZiBhIHByb3Bvc2FsIGNhbiBiZSBleGVjdXRlZCAoaWYgdGhlIHByb3Bvc2FsIGhhcyBzdWNjZWVkZWQpLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIC8vIFRoZSBwcm9wb3NhbCBJRCBvZiB0aGUgcHJvcG9zYWwgeW91IHdhbnQgdG8gY2hlY2tcbiAgICogY29uc3QgcHJvcG9zYWxJZCA9IFwiMFwiO1xuICAgKiBjb25zdCBjYW5FeGVjdXRlID0gYXdhaXQgY29udHJhY3QuY2FuRXhlY3V0ZShwcm9wb3NhbElkKTtcbiAgICogY29uc29sZS5sb2coY2FuRXhlY3V0ZSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcHJvcG9zYWxJZCAtIFRoZSBwcm9wb3NhbCBJRCB0byBjaGVjay5cbiAgICogQHJldHVybnMgLSBUcnVlIGlmIHRoZSBwcm9wb3NhbCBjYW4gYmUgZXhlY3V0ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICovXG4gIGFzeW5jIGNhbkV4ZWN1dGUocHJvcG9zYWxJZCkge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlRXhpc3RzKHByb3Bvc2FsSWQpO1xuICAgIGNvbnN0IHByb3Bvc2FsID0gYXdhaXQgdGhpcy5nZXQocHJvcG9zYWxJZCk7XG4gICAgY29uc3QgdG9zID0gcHJvcG9zYWwuZXhlY3V0aW9ucy5tYXAocCA9PiBwLnRvQWRkcmVzcyk7XG4gICAgY29uc3QgdmFsdWVzID0gcHJvcG9zYWwuZXhlY3V0aW9ucy5tYXAocCA9PiBwLm5hdGl2ZVRva2VuVmFsdWUpO1xuICAgIGNvbnN0IGRhdGFzID0gcHJvcG9zYWwuZXhlY3V0aW9ucy5tYXAocCA9PiBwLnRyYW5zYWN0aW9uRGF0YSk7XG4gICAgY29uc3QgZGVzY3JpcHRpb25IYXNoID0gZXRoZXJzLnV0aWxzLmlkKHByb3Bvc2FsLmRlc2NyaXB0aW9uKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5jb250cmFjdFdyYXBwZXIuY2FsbFN0YXRpYygpLmV4ZWN1dGUodG9zLCB2YWx1ZXMsIGRhdGFzLCBkZXNjcmlwdGlvbkhhc2gpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB0aGUgYmFsYW5jZSBvZiB0aGUgcHJvamVjdCB3YWxsZXQgaW4gdGhlIG5hdGl2ZSB0b2tlbiBvZiB0aGUgY2hhaW5cbiAgICpcbiAgICogQHJldHVybnMgLSBUaGUgYmFsYW5jZSBvZiB0aGUgcHJvamVjdCBpbiB0aGUgbmF0aXZlIHRva2VuIG9mIHRoZSBjaGFpblxuICAgKi9cbiAgYXN5bmMgYmFsYW5jZSgpIHtcbiAgICBjb25zdCBiYWxhbmNlID0gYXdhaXQgdGhpcy5jb250cmFjdFdyYXBwZXIucmVhZENvbnRyYWN0LnByb3ZpZGVyLmdldEJhbGFuY2UodGhpcy5jb250cmFjdFdyYXBwZXIucmVhZENvbnRyYWN0LmFkZHJlc3MpO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBcIlwiLFxuICAgICAgc3ltYm9sOiBcIlwiLFxuICAgICAgZGVjaW1hbHM6IDE4LFxuICAgICAgdmFsdWU6IGJhbGFuY2UsXG4gICAgICBkaXNwbGF5VmFsdWU6IGV0aGVycy51dGlscy5mb3JtYXRVbml0cyhiYWxhbmNlLCAxOClcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIHRoZSBiYWxhbmNlIG9mIHRoZSBwcm9qZWN0IHdhbGxldCBpbiBhIHBhcnRpY3VsYXJcbiAgICogRVJDMjAgdG9rZW4gY29udHJhY3RcbiAgICpcbiAgICogQHJldHVybnMgLSBUaGUgYmFsYW5jZSBvZiB0aGUgcHJvamVjdCBpbiB0aGUgbmF0aXZlIHRva2VuIG9mIHRoZSBjaGFpblxuICAgKi9cbiAgYXN5bmMgYmFsYW5jZU9mVG9rZW4odG9rZW5BZGRyZXNzKSB7XG4gICAgY29uc3QgZXJjMjAgPSBuZXcgQ29udHJhY3QodG9rZW5BZGRyZXNzLCBFUkMyMEFiaSwgdGhpcy5jb250cmFjdFdyYXBwZXIuZ2V0UHJvdmlkZXIoKSk7XG4gICAgcmV0dXJuIGF3YWl0IGZldGNoQ3VycmVuY3lWYWx1ZSh0aGlzLmNvbnRyYWN0V3JhcHBlci5nZXRQcm92aWRlcigpLCB0b2tlbkFkZHJlc3MsIGF3YWl0IGVyYzIwLmJhbGFuY2VPZih0aGlzLmNvbnRyYWN0V3JhcHBlci5yZWFkQ29udHJhY3QuYWRkcmVzcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgYSBwcm9wb3NhbCBieSBpdHMgaWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gcHJvcG9zYWxJZCAtIFByb3Bvc2FsIHRvIGNoZWNrIGZvclxuICAgKi9cbiAgYXN5bmMgZW5zdXJlRXhpc3RzKHByb3Bvc2FsSWQpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5jb250cmFjdFdyYXBwZXIucmVhZENvbnRyYWN0LnN0YXRlKHByb3Bvc2FsSWQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IEVycm9yKGBQcm9wb3NhbCAke3Byb3Bvc2FsSWR9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIFZvdGUgY29udHJhY3QgY29uZmlndXJhdGlvblxuICAgKi9cbiAgYXN5bmMgc2V0dGluZ3MoKSB7XG4gICAgY29uc3QgW3ZvdGluZ0RlbGF5LCB2b3RpbmdQZXJpb2QsIHZvdGluZ1Rva2VuQWRkcmVzcywgdm90aW5nUXVvcnVtRnJhY3Rpb24sIHByb3Bvc2FsVG9rZW5UaHJlc2hvbGRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuY29udHJhY3RXcmFwcGVyLnJlYWRDb250cmFjdC52b3RpbmdEZWxheSgpLCB0aGlzLmNvbnRyYWN0V3JhcHBlci5yZWFkQ29udHJhY3Qudm90aW5nUGVyaW9kKCksIHRoaXMuY29udHJhY3RXcmFwcGVyLnJlYWRDb250cmFjdC50b2tlbigpLCB0aGlzLmNvbnRyYWN0V3JhcHBlci5yZWFkQ29udHJhY3RbXCJxdW9ydW1OdW1lcmF0b3IoKVwiXSgpLCB0aGlzLmNvbnRyYWN0V3JhcHBlci5yZWFkQ29udHJhY3QucHJvcG9zYWxUaHJlc2hvbGQoKV0pO1xuICAgIGNvbnN0IHZvdGluZ1Rva2VuTWV0YWRhdGEgPSBhd2FpdCBmZXRjaEN1cnJlbmN5TWV0YWRhdGEodGhpcy5jb250cmFjdFdyYXBwZXIuZ2V0UHJvdmlkZXIoKSwgdm90aW5nVG9rZW5BZGRyZXNzKTtcbiAgICByZXR1cm4ge1xuICAgICAgdm90aW5nRGVsYXk6IHZvdGluZ0RlbGF5LnRvU3RyaW5nKCksXG4gICAgICB2b3RpbmdQZXJpb2Q6IHZvdGluZ1BlcmlvZC50b1N0cmluZygpLFxuICAgICAgdm90aW5nVG9rZW5BZGRyZXNzLFxuICAgICAgdm90aW5nVG9rZW5NZXRhZGF0YSxcbiAgICAgIHZvdGluZ1F1b3J1bUZyYWN0aW9uOiB2b3RpbmdRdW9ydW1GcmFjdGlvbi50b1N0cmluZygpLFxuICAgICAgcHJvcG9zYWxUb2tlblRocmVzaG9sZDogcHJvcG9zYWxUb2tlblRocmVzaG9sZC50b1N0cmluZygpXG4gICAgfTtcbiAgfVxuXG4gIC8qKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICogV1JJVEUgRlVOQ1RJT05TXG4gICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgUHJvcG9zYWxcbiAgICpcbiAgICogQHJlbWFya3MgQ3JlYXRlIGEgbmV3IHByb3Bvc2FsIGZvciB0b2tlbiBob2xkZXJzIHRvIHZvdGUgb24uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogLy8gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBwcm9wb3NhbCB5b3Ugd2FudCB0byBwYXNzXG4gICAqIGNvbnN0IGRlc2NyaXB0aW9uID0gXCJUaGlzIGlzIGEgZ3JlYXQgcHJvcG9zYWwgLSB2b3RlIGZvciBpdCFcIlxuICAgKiAvLyBZb3UgY2FuIChvcHRpb25hbGx5KSBwYXNzIGluIGNvbnRyYWN0IGNhbGxzIHRoYXQgd2lsbCBnZXQgZXhlY3V0ZWQgd2hlbiB0aGUgcHJvcG9zYWwgaXMgZXhlY3V0ZWQuXG4gICAqIGNvbnN0IGV4ZWN1dGlvbnMgPSBbXG4gICAqICAge1xuICAgKiAgICAgLy8gVGhlIGNvbnRyYWN0IHlvdSB3YW50IHRvIG1ha2UgYSBjYWxsIHRvXG4gICAqICAgICB0b0FkZHJlc3M6IFwiMHguLi5cIixcbiAgICogICAgIC8vIFRoZSBhbW91bnQgb2YgdGhlIG5hdGl2ZSBjdXJyZW5jeSB0byBzZW5kIGluIHRoaXMgdHJhbnNhY3Rpb25cbiAgICogICAgIG5hdGl2ZVRva2VuVmFsdWU6IDAsXG4gICAqICAgICAvLyBUcmFuc2FjdGlvbiBkYXRhIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBwcm9wb3NhbCBpcyBleGVjdXRlZFxuICAgKiAgICAgLy8gVGhpcyBpcyBhbiBleGFtcGxlIHRyYW5zZmVyIHRyYW5zYWN0aW9uIHdpdGggYSB0b2tlbiBjb250cmFjdCAod2hpY2ggeW91IHdvdWxkIG5lZWQgdG8gc2V0IHVwIGluIGNvZGUpXG4gICAqICAgICB0cmFuc2FjdGlvbkRhdGE6IHRva2VuQ29udHJhY3QuZW5jb2Rlci5lbmNvZGUoXG4gICAqICAgICAgIFwidHJhbnNmZXJcIiwgW1xuICAgKiAgICAgICAgIGZyb21BZGRyZXNzLFxuICAgKiAgICAgICAgIGFtb3VudCxcbiAgICogICAgICAgXVxuICAgKiAgICAgKSxcbiAgICogICB9XG4gICAqIF1cbiAgICpcbiAgICogY29uc3QgcHJvcG9zYWwgPSBhd2FpdCBjb250cmFjdC5wcm9wb3NlKGRlc2NyaXB0aW9uLCBleGVjdXRpb25zKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBkZXNjcmlwdGlvbiAtIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgcHJvcG9zYWwuXG4gICAqIEBwYXJhbSBleGVjdXRpb25zIC0gQSBzZXQgb2YgZXhlY3V0YWJsZSB0cmFuc2FjdGlvbnMgdGhhdCB3aWxsIGJlIHJ1biBpZiB0aGUgcHJvcG9zYWwgaXMgcGFzc2VkIGFuZCBleGVjdXRlZC5cbiAgICogQHJldHVybnMgLSBUaGUgaWQgb2YgdGhlIGNyZWF0ZWQgcHJvcG9zYWwgYW5kIHRoZSB0cmFuc2FjdGlvbiByZWNlaXB0LlxuICAgKi9cbiAgYXN5bmMgcHJvcG9zZShkZXNjcmlwdGlvbiwgZXhlY3V0aW9ucykge1xuICAgIGlmICghZXhlY3V0aW9ucykge1xuICAgICAgZXhlY3V0aW9ucyA9IFt7XG4gICAgICAgIHRvQWRkcmVzczogdGhpcy5jb250cmFjdFdyYXBwZXIucmVhZENvbnRyYWN0LmFkZHJlc3MsXG4gICAgICAgIG5hdGl2ZVRva2VuVmFsdWU6IDAsXG4gICAgICAgIHRyYW5zYWN0aW9uRGF0YTogXCIweFwiXG4gICAgICB9XTtcbiAgICB9XG4gICAgY29uc3QgdG9zID0gZXhlY3V0aW9ucy5tYXAocCA9PiBwLnRvQWRkcmVzcyk7XG4gICAgY29uc3QgdmFsdWVzID0gZXhlY3V0aW9ucy5tYXAocCA9PiBwLm5hdGl2ZVRva2VuVmFsdWUpO1xuICAgIGNvbnN0IGRhdGFzID0gZXhlY3V0aW9ucy5tYXAocCA9PiBwLnRyYW5zYWN0aW9uRGF0YSk7XG4gICAgY29uc3QgcmVjZWlwdCA9IGF3YWl0IHRoaXMuY29udHJhY3RXcmFwcGVyLnNlbmRUcmFuc2FjdGlvbihcInByb3Bvc2VcIiwgW3RvcywgdmFsdWVzLCBkYXRhcywgZGVzY3JpcHRpb25dKTtcbiAgICBjb25zdCBldmVudCA9IHRoaXMuY29udHJhY3RXcmFwcGVyLnBhcnNlTG9ncyhcIlByb3Bvc2FsQ3JlYXRlZFwiLCByZWNlaXB0Py5sb2dzKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGV2ZW50WzBdLmFyZ3MucHJvcG9zYWxJZCxcbiAgICAgIHJlY2VpcHRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZvdGVcbiAgICpcbiAgICogQHJlbWFya3MgVm90ZSBvbiBhbiBhY3RpdmUgcHJvcG9zYWxcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiAvLyBUaGUgcHJvcG9zYWwgSUQgb2YgdGhlIHByb3Bvc2FsIHlvdSB3YW50IHRvIHZvdGUgb25cbiAgICogY29uc3QgcHJvcG9zYWxJZCA9IFwiMFwiO1xuICAgKiAvLyBUaGUgdm90ZSB0eXBlIHlvdSB3YW50IHRvIGNhc3QsIGNhbiBiZSBWb3RlVHlwZS5BZ2FpbnN0LCBWb3RlVHlwZS5Gb3IsIG9yIFZvdGVUeXBlLkFic3RhaW5cbiAgICogY29uc3Qgdm90ZVR5cGUgPSBWb3RlVHlwZS5Gb3I7XG4gICAqIC8vIFRoZSAob3B0aW9uYWwpIHJlYXNvbiBmb3IgdGhlIHZvdGVcbiAgICogY29uc3QgcmVhc29uID0gXCJJIGxpa2UgdGhpcyBwcm9wb3NhbCFcIjtcbiAgICpcbiAgICogYXdhaXQgY29udHJhY3Qudm90ZShwcm9wb3NhbElkLCB2b3RlVHlwZSwgcmVhc29uKTtcbiAgICogYGBgXG4gICAqIEBwYXJhbSBwcm9wb3NhbElkIC0gVGhlIHByb3Bvc2FsIHRvIGNhc3QgYSB2b3RlIG9uLlxuICAgKiBAcGFyYW0gdm90ZVR5cGUgLSBUaGUgcG9zaXRpb24gdGhlIHZvdGVyIGlzIHRha2luZyBvbiB0aGVpciB2b3RlLlxuICAgKiBAcGFyYW0gcmVhc29uIC0gKG9wdGlvbmFsKSBUaGUgcmVhc29uIGZvciB0aGUgdm90ZS5cbiAgICovXG4gIGFzeW5jIHZvdGUocHJvcG9zYWxJZCwgdm90ZVR5cGUpIHtcbiAgICBsZXQgcmVhc29uID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBcIlwiO1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlRXhpc3RzKHByb3Bvc2FsSWQpO1xuICAgIHJldHVybiB7XG4gICAgICByZWNlaXB0OiBhd2FpdCB0aGlzLmNvbnRyYWN0V3JhcHBlci5zZW5kVHJhbnNhY3Rpb24oXCJjYXN0Vm90ZVdpdGhSZWFzb25cIiwgW3Byb3Bvc2FsSWQsIHZvdGVUeXBlLCByZWFzb25dKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBQcm9wb3NhbFxuICAgKlxuICAgKiBAcmVtYXJrcyBFeGVjdXRlIHRoZSByZWxhdGVkIHRyYW5zYWN0aW9ucyBmb3IgYSBwcm9wb3NhbCBpZiB0aGUgcHJvcG9zYWwgc3VjY2VlZGVkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIC8vIFRoZSBwcm9wb3NhbCBJRCBvZiB0aGUgcHJvcG9zYWwgeW91IHdhbnQgdG8gZXhlY3V0ZVxuICAgKiBjb25zdCBwcm9wb3NhbElkID0gXCIwXCJcbiAgICogYXdhaXQgY29udHJhY3QuZXhlY3V0ZShwcm9wb3NhbElkKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwcm9wb3NhbElkIC0gVGhlIHByb3Bvc2FsIGlkIHRvIGV4ZWN1dGUuXG4gICAqL1xuICBhc3luYyBleGVjdXRlKHByb3Bvc2FsSWQpIHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUV4aXN0cyhwcm9wb3NhbElkKTtcbiAgICBjb25zdCBwcm9wb3NhbCA9IGF3YWl0IHRoaXMuZ2V0KHByb3Bvc2FsSWQpO1xuICAgIGNvbnN0IHRvcyA9IHByb3Bvc2FsLmV4ZWN1dGlvbnMubWFwKHAgPT4gcC50b0FkZHJlc3MpO1xuICAgIGNvbnN0IHZhbHVlcyA9IHByb3Bvc2FsLmV4ZWN1dGlvbnMubWFwKHAgPT4gcC5uYXRpdmVUb2tlblZhbHVlKTtcbiAgICBjb25zdCBkYXRhcyA9IHByb3Bvc2FsLmV4ZWN1dGlvbnMubWFwKHAgPT4gcC50cmFuc2FjdGlvbkRhdGEpO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uSGFzaCA9IGV0aGVycy51dGlscy5pZChwcm9wb3NhbC5kZXNjcmlwdGlvbik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlY2VpcHQ6IGF3YWl0IHRoaXMuY29udHJhY3RXcmFwcGVyLnNlbmRUcmFuc2FjdGlvbihcImV4ZWN1dGVcIiwgW3RvcywgdmFsdWVzLCBkYXRhcywgZGVzY3JpcHRpb25IYXNoXSlcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgYXN5bmMgcHJlcGFyZShtZXRob2QsIGFyZ3MsIG92ZXJyaWRlcykge1xuICAgIHJldHVybiBUcmFuc2FjdGlvbi5mcm9tQ29udHJhY3RXcmFwcGVyKHtcbiAgICAgIGNvbnRyYWN0V3JhcHBlcjogdGhpcy5jb250cmFjdFdyYXBwZXIsXG4gICAgICBtZXRob2QsXG4gICAgICBhcmdzLFxuICAgICAgb3ZlcnJpZGVzXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBhc3luYyBjYWxsKGZ1bmN0aW9uTmFtZSkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jb250cmFjdFdyYXBwZXIuY2FsbChmdW5jdGlvbk5hbWUsIC4uLmFyZ3MpO1xuICB9XG59XG5cbmV4cG9ydCB7IFZvdGUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==